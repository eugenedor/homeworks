--
-- Создать таблицу [dbo].[MT_LOAD_RULE_IMG]
--
CREATE TABLE [dbo].[MT_LOAD_RULE_IMG] (
  [LoadRuleImgId] [bigint] IDENTITY,
  [LoadRuleId] [bigint] NOT NULL,
  [Data] [varbinary](max) NULL,
  [MimeType] [varchar](50) NULL,
  [Name] [varchar](300) NULL,
  [DateLoad] [datetime] NOT NULL,
  CONSTRAINT [PK_MT_LOAD_RULE_IMG] PRIMARY KEY CLUSTERED ([LoadRuleImgId])
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO
--IF @@ERROR<>0 OR @@TRANCOUNT=0 BEGIN IF @@TRANCOUNT>0 ROLLBACK SET NOEXEC ON END
--GO

--
-- Создать индекс [FK_MT_LOAD_RULE_IMG_MT_LOAD_RULE] для объекта типа таблица [dbo].[MT_LOAD_RULE_IMG]
--
CREATE INDEX [FK_MT_LOAD_RULE_IMG_MT_LOAD_RULE]
  ON [dbo].[MT_LOAD_RULE_IMG] ([LoadRuleId])
  ON [PRIMARY]
GO
--IF @@ERROR<>0 OR @@TRANCOUNT=0 BEGIN IF @@TRANCOUNT>0 ROLLBACK SET NOEXEC ON END
--GO

--
-- Создать внешний ключ [FK_MT_LOAD_RULE_IMG_MT_LOAD_RULE] для объекта типа таблица [dbo].[MT_LOAD_RULE_IMG]
--
ALTER TABLE [dbo].MT_LOAD_RULE_IMG
  ADD CONSTRAINT [FK_MT_LOAD_RULE_IMG_MT_LOAD_RULE] FOREIGN KEY ([LoadRuleId]) REFERENCES [dbo].MT_LOAD_RULE ([LoadRuleId])
GO
--IF @@ERROR<>0 OR @@TRANCOUNT=0 BEGIN IF @@TRANCOUNT>0 ROLLBACK SET NOEXEC ON END
--GO